---
layout: post
title:  "《Linux 命令速查手册》摘录"
date:   2015-10-08 12:00:00
tags:	daily
myTag:	book	

---

# Scott Granneman 《Linux 命令速查手册》

-------------------


### 1.1 一切都是文件

##### 2015-09-25 23:25:48
在Linux系统中，一切都是文件。

##### 2015-09-25 23:26:15
但是目录呢？它也是一种文件，只不过是一种特殊的文件，其中包含其他文件的信息。磁盘驱动器则是真正的大文件了。网络连接也是文件，甚至运行中的进程都是文件。这些都属于文件的范畴。

---

### 1.2 文件名的最大长度

##### 2015-09-25 23:26:30
DOS中文件名的长度不能超过8个字符，再加上由3个字符组成的扩展名。

OS X之前的苹果机系统则将长度限制扩展到31个字符

Linux（和Unix）文件名最多可以长达255个字符。

---


### 1.3 文件名区分大小写

##### 2015-09-25 23:27:07
Linux对于文件名是区分大小写的。

---

### 2.44 变更成root用户，包括其环境变量

##### 2015-09-27 23:52:07
当使用su -时，不但用户变更成了root，而且还使用了root的环境变量。

---

### 4.3 只有前面的命令运行失败，才运行下一个命令

##### 2015-09-28 01:34:33
当一个处理失败时，经常用||给管理员发送警告。例如，为了确保特定的计算机开启和正在运行，管理员可能不时地使用ping命令对它进行查询。如果ping不通，则发送一封电子邮件给管理员，通报这一情况。

	ping -c 1 -w 15 -n 72.14.203.104 || 
	{
		echo “Server down” | mail -s 'Server down' admin@google.com
	}

---

### 5.3 将文件与其他文件拼接

##### 2015-09-30 23:09:20
更好的方法是将下面这行配置添加到.bashrc文件中，这样每次启动新的会话时都可以自动应用这一配置：

	export EDITOR=vim

##### 2015-09-30 23:24:57

	tail -f

使用-f（或--follow）选项，tail命令就不会自动关闭了。每当文件发生变化时，它就会显示文件的最后10行（或在选项中增加-n，指定不同的数字）的内容。

---

### 7.9　递归地修改权限

##### 2015-10-01 18:37:01
如果文件是可执行的，那么它就可以作为程序来运行；但目录也必须是可执行的，才能允许用户访问其内部，读取它的文件和子目录。

---

### 7.10　设置和清除suid

##### 2015-10-01 21:38:45
passwd的拥有者是root用户，但是有必要让普通用户也能运行这个命令，否则他们就不能修改自己的密码。为了让所有人都能执行passwd命令，需要为用户、组及系统的其他用户都设置x权限。不过，这还不够。答案是将passwd设成suid root，这样所有人都能以root用户的权限运行这个命令。

---

### 8 归档和压缩

##### 2015-10-01 22:26:52
事实上，有可能在压缩过程中得到的文件的体积会更大！如果文件已经压缩过，那么再次压缩就会增加一些额外的开销，导致生成的文件会稍微大些。

---

### 9.1 搜索文件名数据库

##### 2015-10-20 23:18:54
知道文件的名称，或者名称的一部分，但不记得放在系统的哪个位置。这就是locate命令要解决的问题。locate命令能够在文件、程序和目录中查找与提供的搜索项匹配的内容，并把任何匹配的结果依次显示到终端界面上。

##### 2015-10-20 23:20:01
slocate（代表secure locate）命令的版本更新些，它不会搜索运行slocate命令的用户没有权限查看的目录

---

### 9.2 搜索文件名数据库，不区分大小写

##### 2015-10-21 19:51:15

	locate -i

##### 2015-10-21 20:25:41
正则表达式中的单引号和双引号的用法也有很大区别。单引号（'和'）是在告诉shell正在搜索一个字符串，而双引号（"和"）则是让shell知道想要使用shell变量。

---

### 11.2 再次运行最近运行过的命令

##### 2015-10-27 12:40:50
如果想再次运行刚刚使用过的那条命令，只要输入两个叹号（!!）

---

### 11.7 创建新的临时别名

##### 2015-10-28 18:23:56
alias [alias]= '[command]'

##### 2015-10-28 18:26:50
用这种方法创建的别名只有在当前shell会话（session）有效时才能存在。会话退出后，别名也就不存在了。

### 11.8 创建新的永久别名

##### 2015-10-28 20:19:21
第二种是通过运行命令来重新加载文件，如下所示。

	$ . .bash_aliases

---

### 12.1 查看当前正在运行的所有进程

##### 2015-10-29 20:05:15
在ps命令后面使用以下选项：a（表示所有用户）、u（以面向用户的格式显示，或显示拥有每个进程的用户）、x（没有控制tty①或终端屏幕的进程，“显示每个进程”的另一种方法）。

---

### 12.2 查看进程树

##### 2015-10-29 20:06:46
在Linux世界中，进程并不是凭空出现的。通常，启动一个程序的同时，也会启动其他程序。例如，Linux系统中的所有进程最初都来自init，它是所有进程的源头，其PID总为1。ps命令能够提供该进程树的一种基于文本的表现方式，这样就能可视化地看看该进程又创建了哪些其他进程。要查看进程树，除了使用上一节用过的a、u和x选项，还要加上个f（其名称源于ASCII art forest）选项。

---

### 12.5 查看正在运行的进程的动态更新列表

##### 2015-10-29 22:55:35
如果想在top命令中关闭程序，只需按k键。这时在列表上方（在以Swap:开始的那一行的后面），会看到以下内容：

	PID to kill:

输入想关闭进程的PID（假设为8026），按Enter键，命令会询问要使用什么信号编号:

	Kill PID 8026 with signal [15]:

top命令默认使用的信号是15。如果乐意用这个默认值，就按Enter键；如果不乐意，就直接输入想使用的信号编号，然后按Enter键。一两秒钟以后，要关闭的进程就会从top显示中消失了。

---

### 12.8 列出正在使用特定文件的用户

##### 2015-10-29 23:02:48
看看特定的文件正在由谁使用。为此，只要在lsof后面输入文件在系统中的路径就可以了。

---

### 12.10 显示系统RAM的信息

##### 2015-10-29 23:04:41
要查看系统内存的当前状态，可以使用free命令。

---

### 14.5 配置网络接口

##### 2015-10-31 11:34:04
要将eth0上的以太网卡的IP地址修改为192.168.0.125，可以运行以下命令（几乎所有与ifconfig相关的命令，都需要以root用户来运行）：

	# ifconfig eth0 192.168.0.125

---

### 14.8 使用DHCP获得新的网络地址

##### 2015-10-31 11:40:44
有时，你的计算机不能在启动时连接到DHCP服务器，这样就需要手工发起DHCP请求。或者你的网络有问题，因而需要一个新的IP地址。无论什么原因，dhcilent命令都会尝试查询任何可用的DHCP服务器，向它们请求必要的数据（必须以root用户来运行dhclient）。

	# dhclient eth0

##### 2015-10-31 15:54:13

	# scp user@host1:file1 user@host2:file2

这种语法格式基本上与传统的cp命令一样，只不过现在延伸到了网络。
